<div align="center">

# ğŸš€ Express + PUG + EJS + Cookies + Passport Sessions

[![Node.js](https://img.shields.io/badge/Node.js-18+-339933?style=flat-square&logo=node.js&logoColor=white)](https://nodejs.org/)
[![Express](https://img.shields.io/badge/Express-4.x-000000?style=flat-square&logo=express&logoColor=white)](https://expressjs.com/)
[![MongoDB](https://img.shields.io/badge/MongoDB-Atlas-47A248?style=flat-square&logo=mongodb&logoColor=white)](https://www.mongodb.com/atlas)
[![Passport](https://img.shields.io/badge/Passport-Local-34E27A?style=flat-square&logo=passport&logoColor=white)](http://www.passportjs.org/)

**Ğ¡ĞµÑ€Ğ²ĞµÑ€ Ğ½Ğ° Node.js + Express** Ğ·Ñ– Ğ·Ğ¼Ñ–ÑˆĞ°Ğ½Ğ¸Ğ¼Ğ¸ ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½Ñ–Ğ·Ğ°Ñ‚Ğ¾Ñ€Ğ°Ğ¼Ğ¸ (PUG/EJS), ÑÑ‚Ğ°Ñ‚Ğ¸Ñ‡Ğ½Ğ¸Ğ¼Ğ¸ Ñ„Ğ°Ğ¹Ğ»Ğ°Ğ¼Ğ¸, Ğ¿Ñ–Ğ´Ñ‚Ñ€Ğ¸Ğ¼ĞºĞ¾Ñ cookies Ğ´Ğ»Ñ Ñ‚ĞµĞ¼Ğ¸ Ñ‚Ğ° Ğ°Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ñ–Ñ”Ñ Ñ‡ĞµÑ€ĞµĞ· **Passport (Local)** Ğ· **ÑĞµÑÑ–ÑĞ¼Ğ¸** (express-session).

</div>

---

## ğŸ“‹ Ğ—Ğ¼Ñ–ÑÑ‚

- [ğŸ›  Ğ’ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ½Ñ Ñ‚Ğ° Ğ·Ğ°Ğ¿ÑƒÑĞº](#-Ğ²ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ½Ñ-Ñ‚Ğ°-Ğ·Ğ°Ğ¿ÑƒÑĞº)
- [âš™ï¸ ĞšĞ¾Ğ½Ñ„Ñ–Ğ³ÑƒÑ€Ğ°Ñ†Ñ–Ñ](#ï¸-ĞºĞ¾Ğ½Ñ„Ñ–Ğ³ÑƒÑ€Ğ°Ñ†Ñ–Ñ)
- [ğŸŒ HTML-ÑÑ‚Ğ¾Ñ€Ñ–Ğ½ĞºĞ¸ (SSR)](#-html-ÑÑ‚Ğ¾Ñ€Ñ–Ğ½ĞºĞ¸-ssr)
- [ğŸ“¡ JSON API](#-json-api)
- [ğŸª Cookies: Ğ·Ğ±ĞµÑ€ĞµĞ¶ĞµĞ½Ğ½Ñ Ñ‚ĞµĞ¼Ğ¸](#-cookies-Ğ·Ğ±ĞµÑ€ĞµĞ¶ĞµĞ½Ğ½Ñ-Ñ‚ĞµĞ¼Ğ¸)
- [ğŸ” ĞĞ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ñ–Ñ Ñ‡ĞµÑ€ĞµĞ· Passport + Session](#-Ğ°Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ñ–Ñ-Ñ‡ĞµÑ€ĞµĞ·-passport--session)
- [ğŸ“ Ğ¡Ñ‚Ğ°Ñ‚Ğ¸Ñ‡Ğ½Ñ– Ñ„Ğ°Ğ¹Ğ»Ğ¸](#-ÑÑ‚Ğ°Ñ‚Ğ¸Ñ‡Ğ½Ñ–-Ñ„Ğ°Ğ¹Ğ»Ğ¸)
- [ğŸ“ Ğ›Ğ¾Ğ³ÑƒĞ²Ğ°Ğ½Ğ½Ñ Ñ‚Ğ° Ğ¿Ğ¾Ğ¼Ğ¸Ğ»ĞºĞ¸](#-Ğ»Ğ¾Ğ³ÑƒĞ²Ğ°Ğ½Ğ½Ñ-Ñ‚Ğ°-Ğ¿Ğ¾Ğ¼Ğ¸Ğ»ĞºĞ¸)
- [ğŸ—‚ Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾Ñ”ĞºÑ‚Ñƒ](#-ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ°-Ğ¿Ñ€Ğ¾Ñ”ĞºÑ‚Ñƒ)

---

## ğŸ›  Ğ’ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ½Ñ Ñ‚Ğ° Ğ·Ğ°Ğ¿ÑƒÑĞº

```bash
# Ğ’ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ½Ñ Ğ·Ğ°Ğ»ĞµĞ¶Ğ½Ğ¾ÑÑ‚ĞµĞ¹
npm install

# Ğ—Ğ°Ğ¿ÑƒÑĞº ÑĞµÑ€Ğ²ĞµÑ€Ğ°
npm start

# ĞĞ±Ğ¾ Ğ· Ğ°Ğ²Ñ‚Ğ¾Ğ¿ĞµÑ€ĞµĞ·Ğ°Ğ²Ğ°Ğ½Ñ‚Ğ°Ğ¶ĞµĞ½Ğ½ÑĞ¼ (nodemon)
npm run start-local
```

> ğŸ’¡ **Tip:** Ğ”Ğ»Ñ Ñ–Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ñ–Ñ— Ğ· MongoDB Atlas ÑÑ‚Ğ²Ğ¾Ñ€Ñ–Ñ‚ÑŒ Ñ„Ğ°Ğ¹Ğ» `.env` (Ğ°Ğ±Ğ¾ Ğ²Ğ¸ĞºĞ¾Ñ€Ğ¸ÑÑ‚Ğ°Ğ¹Ñ‚Ğµ Ğ¿Ñ€Ğ¸ĞºĞ»Ğ°Ğ´ `.env.example`).

---

## âš™ï¸ ĞšĞ¾Ğ½Ñ„Ñ–Ğ³ÑƒÑ€Ğ°Ñ†Ñ–Ñ

### ĞÑĞ½Ğ¾Ğ²Ğ½Ñ– Ğ·Ğ¼Ñ–Ğ½Ğ½Ñ– ÑĞµÑ€ĞµĞ´Ğ¾Ğ²Ğ¸Ñ‰Ğ°

| Ğ—Ğ¼Ñ–Ğ½Ğ½Ğ°               | ĞĞ¿Ğ¸Ñ                             | Ğ—Ğ° Ğ·Ğ°Ğ¼Ğ¾Ğ²Ñ‡ÑƒĞ²Ğ°Ğ½Ğ½ÑĞ¼    |
| -------------------- | -------------------------------- | ------------------- |
| `PORT`               | ĞŸĞ¾Ñ€Ñ‚ ÑĞµÑ€Ğ²ĞµÑ€Ğ°                     | `3000`              |
| `SESSION_SECRET`     | Ğ¡ĞµĞºÑ€ĞµÑ‚ Ğ´Ğ»Ñ ÑĞµÑÑ–Ğ¹ express-session | dev-Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ½Ñ        |
| `SESSION_MAX_AGE_MS` | Ğ¢Ñ€Ğ¸Ğ²Ğ°Ğ»Ñ–ÑÑ‚ÑŒ ÑĞµÑÑ–Ğ¹Ğ½Ğ¾Ñ— cookie       | 7 Ğ´Ğ½Ñ–Ğ²              |
| `COOKIE_SAMESITE`    | ĞŸĞ¾Ğ»Ñ–Ñ‚Ğ¸ĞºĞ° SameSite Ğ´Ğ»Ñ cookies    | `lax`               |
| `COOKIE_SECURE`      | Cookies Ğ»Ğ¸ÑˆĞµ Ğ¿Ğ¾ HTTPS            | `true` Ñƒ production |

### ğŸƒ MongoDB Atlas

ĞŸÑ€Ğ¾Ñ”ĞºÑ‚ Ğ¿Ñ–Ğ´Ñ‚Ñ€Ğ¸Ğ¼ÑƒÑ” Ñ‡Ğ¸Ñ‚Ğ°Ğ½Ğ½Ñ Ñ‚Ğ° Ğ¿Ğ¾Ğ²Ğ½Ğ¸Ğ¹ CRUD Ğ·Ñ– ÑÑ‚Ğ°Ñ‚Ñ‚ÑĞ¼Ğ¸ Ğ² MongoDB Atlas Ñ‡ĞµÑ€ĞµĞ· **Mongoose**.

| Ğ—Ğ¼Ñ–Ğ½Ğ½Ğ°        | ĞĞ¿Ğ¸Ñ                                          |
| ------------- | --------------------------------------------- |
| `MONGODB_URI` | Ğ ÑĞ´Ğ¾Ğº Ğ¿Ñ–Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ½Ñ Atlas (`mongodb+srv://...`) |
| `MONGODB_DB`  | ĞĞ°Ğ·Ğ²Ğ° Ğ±Ğ°Ğ·Ğ¸ (Ğ¾Ğ¿Ñ†Ñ–Ğ¹Ğ½Ğ¾)                          |

<details>
<summary>ğŸ“– <b>ĞŸÑ–Ğ´Ğ³Ğ¾Ñ‚Ğ¾Ğ²ĞºĞ° Atlas (Ñ€Ğ¾Ğ·Ğ³Ğ¾Ñ€Ğ½ÑƒÑ‚Ğ¸)</b></summary>

1. Ğ¡Ñ‚Ğ²Ğ¾Ñ€Ñ–Ñ‚ÑŒ ĞºĞ»Ğ°ÑÑ‚ĞµÑ€ Ñƒ [MongoDB Atlas](https://www.mongodb.com/atlas)
2. Ğ¡Ñ‚Ğ²Ğ¾Ñ€Ñ–Ñ‚ÑŒ DB User (username/password)
3. Ğ£ **Network Access** Ğ´Ğ¾Ğ·Ğ²Ğ¾Ğ»ÑŒÑ‚Ğµ Ğ²Ğ°ÑˆÑƒ IP Ğ°Ğ´Ñ€ĞµÑÑƒ (Ğ°Ğ±Ğ¾ `0.0.0.0/0` Ğ´Ğ»Ñ Ğ½Ğ°Ğ²Ñ‡Ğ°Ğ»ÑŒĞ½Ğ¸Ñ… Ñ†Ñ–Ğ»ĞµĞ¹)
4. Ğ’Ñ–Ğ·ÑŒĞ¼Ñ–Ñ‚ÑŒ connection string (MongoDB Driver) Ñ– Ğ²ÑÑ‚Ğ°Ğ²Ñ‚Ğµ Ğ² `MONGODB_URI`

**ĞœÑ–Ğ½Ñ–Ğ¼Ğ°Ğ»ÑŒĞ½Ğ° ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ´Ğ°Ğ½Ğ¸Ñ…:**

| ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€       | Ğ—Ğ½Ğ°Ñ‡ĞµĞ½Ğ½Ñ                                             |
| -------------- | ---------------------------------------------------- |
| Collection     | `articles`                                           |
| ĞŸĞ¾Ğ»Ñ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ñƒ | `title` (string), `author` (string), `body` (string) |

</details>

### ğŸ“§ Email (SMTP)

| Ğ—Ğ¼Ñ–Ğ½Ğ½Ğ°         | ĞĞ¿Ğ¸Ñ                                      |
| -------------- | ----------------------------------------- |
| `APP_BASE_URL` | Ğ‘Ğ°Ğ·Ğ¾Ğ²Ğ¸Ğ¹ URL Ğ´Ğ»Ñ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ñ–Ñ— Ğ»Ñ–Ğ½ĞºÑ–Ğ² Ñƒ Ğ»Ğ¸ÑÑ‚Ğ°Ñ… |
| `SMTP_HOST`    | SMTP Ñ…Ğ¾ÑÑ‚                                 |
| `SMTP_PORT`    | SMTP Ğ¿Ğ¾Ñ€Ñ‚                                 |
| `SMTP_SECURE`  | Ğ—Ğ°Ñ…Ğ¸Ñ‰ĞµĞ½Ğµ Ğ·'Ñ”Ğ´Ğ½Ğ°Ğ½Ğ½Ñ                        |
| `SMTP_USER`    | SMTP ĞºĞ¾Ñ€Ğ¸ÑÑ‚ÑƒĞ²Ğ°Ñ‡                           |
| `SMTP_PASS`    | SMTP Ğ¿Ğ°Ñ€Ğ¾Ğ»ÑŒ                               |
| `MAIL_FROM`    | Email Ğ²Ñ–Ğ´Ğ¿Ñ€Ğ°Ğ²Ğ½Ğ¸ĞºĞ°                         |

---

## ğŸŒ HTML-ÑÑ‚Ğ¾Ñ€Ñ–Ğ½ĞºĞ¸ (SSR)

| ĞœĞµÑ‚Ğ¾Ğ´ | ĞœĞ°Ñ€ÑˆÑ€ÑƒÑ‚                | ĞĞ¿Ğ¸Ñ                       | Ğ¨Ğ°Ğ±Ğ»Ğ¾Ğ½Ñ–Ğ·Ğ°Ñ‚Ğ¾Ñ€ |
| ----- | ---------------------- | -------------------------- | ------------ |
| `GET` | `/`                    | Ğ›Ñ–Ñ‡Ğ¸Ğ»ÑŒĞ½Ğ¸Ğº Ğ¿ĞµÑ€ĞµĞ³Ğ»ÑĞ´Ñ–Ğ² ÑĞµÑÑ–Ñ— | â€”            |
| `GET` | `/users`               | Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº ĞºĞ¾Ñ€Ğ¸ÑÑ‚ÑƒĞ²Ğ°Ñ‡Ñ–Ğ²        | PUG          |
| `GET` | `/users/:userId`       | Ğ”ĞµÑ‚Ğ°Ğ»Ñ– ĞºĞ¾Ñ€Ğ¸ÑÑ‚ÑƒĞ²Ğ°Ñ‡Ğ°         | PUG          |
| `GET` | `/articles`            | Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº ÑÑ‚Ğ°Ñ‚ĞµĞ¹              | EJS          |
| `GET` | `/articles/:articleId` | Ğ”ĞµÑ‚Ğ°Ğ»Ñ– ÑÑ‚Ğ°Ñ‚Ñ‚Ñ–              | EJS          |

### ğŸ—„ SSR Ğ·Ñ– ÑÑ‚Ğ°Ñ‚Ñ‚ÑĞ¼Ğ¸ Ğ· MongoDB

| ĞœĞµÑ‚Ğ¾Ğ´ | ĞœĞ°Ñ€ÑˆÑ€ÑƒÑ‚                   | ĞĞ¿Ğ¸Ñ                                         |
| ----- | ------------------------- | -------------------------------------------- |
| `GET` | `/db/articles`            | Ğ§Ğ¸Ñ‚Ğ°Ñ” ÑÑ‚Ğ°Ñ‚Ñ‚Ñ– Ğ· MongoDB (ĞºĞ¾Ğ»ĞµĞºÑ†Ñ–Ñ `articles`) |
| `GET` | `/db/articles/:articleId` | Ğ§Ğ¸Ñ‚Ğ°Ñ” Ğ¾Ğ´Ğ½Ñƒ ÑÑ‚Ğ°Ñ‚Ñ‚Ñ Ğ· MongoDB Ğ¿Ğ¾ `_id`         |

> ğŸ”’ **Ğ—Ğ°Ñ…Ğ¸Ñ‰ĞµĞ½Ğ¾:** ĞĞ±Ğ¸Ğ´Ğ²Ğ° Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ¸ Ğ²Ğ¸Ğ¼Ğ°Ğ³Ğ°ÑÑ‚ÑŒ Ğ°Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ñ–Ñ—

ğŸ“ Ğ£ÑÑ– ÑÑ‚Ğ¾Ñ€Ñ–Ğ½ĞºĞ¸ Ğ²Ğ¸ĞºĞ¾Ñ€Ğ¸ÑÑ‚Ğ¾Ğ²ÑƒÑÑ‚ÑŒ ÑÑ‚Ğ¸Ğ»Ñ– `public/styles.css` Ñ‚Ğ° Ñ„Ğ°Ğ²Ñ–ĞºĞ¾Ğ½ `public/favicon.ico`

---

## ğŸ“¡ JSON API

> ğŸ” **Ğ’ÑÑ– API Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ¸ Ğ²Ğ¸Ğ¼Ğ°Ğ³Ğ°ÑÑ‚ÑŒ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ñƒ ÑĞµÑÑ–Ñ** (cookie `connect.sid` Ğ¿Ñ–ÑĞ»Ñ Ğ»Ğ¾Ğ³Ñ–Ğ½Ñƒ)

### ğŸ‘¥ Users API

**Ğ‘Ğ°Ğ·Ğ¾Ğ²Ğ¸Ğ¹ ÑˆĞ»ÑÑ…:** `/api/users`

| ĞœĞµÑ‚Ğ¾Ğ´    | ĞœĞ°Ñ€ÑˆÑ€ÑƒÑ‚              | ĞĞ¿Ğ¸Ñ                 | Body                  |
| -------- | -------------------- | -------------------- | --------------------- |
| `GET`    | `/api/users`         | Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº ĞºĞ¾Ñ€Ğ¸ÑÑ‚ÑƒĞ²Ğ°Ñ‡Ñ–Ğ²  | â€”                     |
| `GET`    | `/api/users/:userId` | Ğ”ĞµÑ‚Ğ°Ğ»Ñ– ĞºĞ¾Ñ€Ğ¸ÑÑ‚ÑƒĞ²Ğ°Ñ‡Ğ°   | â€”                     |
| `POST`   | `/api/users`         | Ğ¡Ñ‚Ğ²Ğ¾Ñ€Ğ¸Ñ‚Ğ¸ ĞºĞ¾Ñ€Ğ¸ÑÑ‚ÑƒĞ²Ğ°Ñ‡Ğ° | `username`_, `email`_ |
| `PUT`    | `/api/users/:userId` | Ğ—Ğ°Ğ¼Ñ–Ğ½Ğ¸Ñ‚Ğ¸ ĞºĞ¾Ñ€Ğ¸ÑÑ‚ÑƒĞ²Ğ°Ñ‡Ğ° | Ğ¿Ğ¾Ğ²Ğ½Ğ¸Ğ¹ Ğ¾Ğ±'Ñ”ĞºÑ‚         |
| `PATCH`  | `/api/users/:userId` | Ğ§Ğ°ÑÑ‚ĞºĞ¾Ğ²Ğ¾ Ğ¾Ğ½Ğ¾Ğ²Ğ¸Ñ‚Ğ¸     | Ñ‡Ğ°ÑÑ‚ĞºĞ¾Ğ²Ñ– Ğ´Ğ°Ğ½Ñ–         |
| `DELETE` | `/api/users/:userId` | Ğ’Ğ¸Ğ´Ğ°Ğ»Ğ¸Ñ‚Ğ¸ ĞºĞ¾Ñ€Ğ¸ÑÑ‚ÑƒĞ²Ğ°Ñ‡Ğ° | â€”                     |

### ğŸƒ MongoDB Articles API (Atlas CRUD)

**Ğ‘Ğ°Ğ·Ğ¾Ğ²Ğ¸Ğ¹ ÑˆĞ»ÑÑ…:** `/api/db/articles` (Ğ°Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ñ–Ñ Ğ¾Ğ±Ğ¾Ğ²'ÑĞ·ĞºĞ¾Ğ²Ğ°, Ğ¿Ñ€Ğ°Ñ†ÑÑ” Ğ½Ğ°Ğ¿Ñ€ÑĞ¼Ñƒ Ğ· MongoDB Atlas)

| ĞœĞµÑ‚Ğ¾Ğ´/ÑˆĞ»ÑÑ…                          | ĞĞ¿ĞµÑ€Ğ°Ñ†Ñ–Ñ     | ĞĞ¾Ñ‚Ğ°Ñ‚ĞºĞ¸                                                         |
| ----------------------------------- | ------------ | --------------------------------------------------------------- |
| `GET /api/db/articles`              | `find`       | ĞŸÑ–Ğ´Ñ‚Ñ€Ğ¸Ğ¼ÑƒÑ” `?fields=title,author` Ñ‚Ğ° `?q=` Ğ´Ğ»Ñ Ğ¿Ğ¾ÑˆÑƒĞºÑƒ Ñ– Ğ¿Ñ€Ğ¾ĞµĞºÑ†Ñ–Ñ— |
| `POST /api/db/articles`             | `insertOne`  | Body: `{ "title": "...", "author"?, "body"? }`                  |
| `POST /api/db/articles/bulk`        | `insertMany` | Body: `{ "items": [ { "title": "..." }, ... ] }`                |
| `PATCH /api/db/articles/:id`        | `updateOne`  | Body: Ñ‡Ğ°ÑÑ‚ĞºĞ¾Ğ²Ñ– Ğ¿Ğ¾Ğ»Ñ, Ğ·Ğ°ÑÑ‚Ğ¾ÑĞ¾Ğ²ÑƒÑ”Ñ‚ÑŒÑÑ Ñ‡ĞµÑ€ĞµĞ· `$set`                |
| `PUT /api/db/articles/:id`          | `replaceOne` | Body: Ğ¿Ğ¾Ğ²Ğ½Ğ¸Ğ¹ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚ (title Ğ¾Ğ±Ğ¾Ğ²'ÑĞ·ĞºĞ¾Ğ²Ğ¾)                       |
| `POST /api/db/articles/update-many` | `updateMany` | Body: `{ "filter": { ... }, "update": { ... } }`                |
| `DELETE /api/db/articles/:id`       | `deleteOne`  | Ğ’Ğ¸Ğ´Ğ°Ğ»ÑÑ” Ğ¾Ğ´Ğ¸Ğ½ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚ Ğ·Ğ° `_id`                                  |
| `POST /api/db/articles/delete-many` | `deleteMany` | Body: `{ "filter": { ... } }`                                   |

---

## ğŸª Cookies: Ğ·Ğ±ĞµÑ€ĞµĞ¶ĞµĞ½Ğ½Ñ Ñ‚ĞµĞ¼Ğ¸

Cookie-parser Ğ¿Ñ–Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğ¹ Ğ³Ğ»Ğ¾Ğ±Ğ°Ğ»ÑŒĞ½Ğ¾. ĞœĞ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ¸ Ğ´Ğ»Ñ Ğ½Ğ°Ğ»Ğ°ÑˆÑ‚ÑƒĞ²Ğ°Ğ½ÑŒ Ñ‚ĞµĞ¼Ğ¸:

| ĞœĞµÑ‚Ğ¾Ğ´  | ĞœĞ°Ñ€ÑˆÑ€ÑƒÑ‚              | ĞĞ¿Ğ¸Ñ                                                      |
| ------ | -------------------- | --------------------------------------------------------- |
| `GET`  | `/preferences/theme` | ĞŸĞ¾Ğ²ĞµÑ€Ñ‚Ğ°Ñ” Ğ¿Ğ¾Ñ‚Ğ¾Ñ‡Ğ½Ñƒ Ñ‚ĞµĞ¼Ñƒ Ğ· cookie (Ğ·Ğ° Ğ·Ğ°Ğ¼Ğ¾Ğ²Ñ‡ÑƒĞ²Ğ°Ğ½Ğ½ÑĞ¼ `light`) |
| `POST` | `/preferences/theme` | Ğ—Ğ±ĞµÑ€Ñ–Ğ³Ğ°Ñ” Ñ‚ĞµĞ¼Ñƒ Ñƒ cookie Ğ½Ğ° **30 Ğ´Ğ½Ñ–Ğ²**                     |

---

## ğŸ” ĞĞ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ñ–Ñ Ñ‡ĞµÑ€ĞµĞ· Passport + Session

Ğ¡Ñ‚Ğ°Ğ½ Ğ°Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ñ–Ñ— Ğ·Ğ±ĞµÑ€Ñ–Ğ³Ğ°Ñ”Ñ‚ÑŒÑÑ Ñƒ ÑĞµÑÑ–Ñ— (cookie `connect.sid` Ğ· `httpOnly` + `secure` Ñƒ production).

> ğŸ›¡ **Middleware:** `ensureAuthenticated` â€” Ğ¿Ğ¾Ğ²ĞµÑ€Ñ‚Ğ°Ñ” `401` ÑĞºÑ‰Ğ¾ ĞºĞ¾Ñ€Ğ¸ÑÑ‚ÑƒĞ²Ğ°Ñ‡ Ğ½Ğµ Ğ·Ğ°Ğ»Ğ¾Ğ³Ñ–Ğ½ĞµĞ½Ğ¸Ğ¹

### ğŸ”‘ Ğ‘Ğ°Ğ·Ğ¾Ğ²Ñ– Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ¸ (LocalStrategy)

| ĞœĞµÑ‚Ğ¾Ğ´  | ĞœĞ°Ñ€ÑˆÑ€ÑƒÑ‚              | Body                             | ĞĞ¿Ğ¸Ñ                   |
| ------ | -------------------- | -------------------------------- | ---------------------- |
| `POST` | `/api/auth/register` | `email`, `password`, `username`? | Ğ ĞµÑ”ÑÑ‚Ñ€Ğ°Ñ†Ñ–Ñ + Ğ°Ğ²Ñ‚Ğ¾Ğ»Ğ¾Ğ³Ñ–Ğ½ |
| `POST` | `/api/auth/login`    | `email`, `password`              | Ğ›Ğ¾Ğ³Ñ–Ğ½ Ñƒ ÑĞµÑÑ–Ñ          |
| `GET`  | `/api/auth/me`       | â€”                                | ĞŸĞ¾Ñ‚Ğ¾Ñ‡Ğ½Ğ¸Ğ¹ ĞºĞ¾Ñ€Ğ¸ÑÑ‚ÑƒĞ²Ğ°Ñ‡    |
| `POST` | `/api/auth/logout`   | â€”                                | Ğ’Ğ¸Ñ…Ñ–Ğ´ + Ğ·Ğ½Ğ¸Ñ‰ĞµĞ½Ğ½Ñ ÑĞµÑÑ–Ñ— |

### ğŸ›¡ Ğ—Ğ°Ñ…Ğ¸Ñ‰ĞµĞ½Ñ– Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ¸

- `/users`, `/articles`, `/db/articles`, `/api/users`, `/api/db/articles` â€” Ğ·Ğ°Ñ…Ğ¸Ñ‰ĞµĞ½Ñ– Ñ‡ĞµÑ€ĞµĞ· `ensureAuthenticated`

### ğŸ”„ Ğ’Ñ–Ğ´Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ½Ñ Ğ¿Ğ°Ñ€Ğ¾Ğ»Ñ

| ĞœĞµÑ‚Ğ¾Ğ´  | ĞœĞ°Ñ€ÑˆÑ€ÑƒÑ‚                     | Body                | ĞĞ¿Ğ¸Ñ                    |
| ------ | --------------------------- | ------------------- | ----------------------- |
| `POST` | `/api/auth/forgot-password` | `email`             | ĞĞ°Ğ´ÑĞ¸Ğ»Ğ°Ñ” Ğ»Ğ¸ÑÑ‚ Ñ–Ğ· Ğ»Ñ–Ğ½ĞºĞ¾Ğ¼ |
| `POST` | `/api/auth/reset-password`  | `token`, `password` | Ğ’ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ÑÑ” Ğ½Ğ¾Ğ²Ğ¸Ğ¹ Ğ¿Ğ°Ñ€Ğ¾Ğ»ÑŒ |

> ğŸ’¡ Ğ£ dev Ñ€ĞµĞ¶Ğ¸Ğ¼Ñ– (Ğ±ĞµĞ· SMTP) Ğ»Ñ–Ğ½Ğº Ğ²Ñ–Ğ´Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ½Ñ Ğ´Ñ€ÑƒĞºÑƒÑ”Ñ‚ÑŒÑÑ Ğ² ĞºĞ¾Ğ½ÑĞ¾Ğ»ÑŒ

---

## ğŸ“ Ğ¡Ñ‚Ğ°Ñ‚Ğ¸Ñ‡Ğ½Ñ– Ñ„Ğ°Ğ¹Ğ»Ğ¸

- ğŸ“‚ Ğ’ÑÑ ÑÑ‚Ğ°Ñ‚Ğ¸ĞºĞ° Ğ²Ñ–Ğ´Ğ´Ğ°Ñ”Ñ‚ÑŒÑÑ Ğ· `public/` Ñ‡ĞµÑ€ĞµĞ· `express.static`
- ğŸ–¼ `public/favicon.ico` Ğ¿Ñ–Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğ¹ Ğ½Ğ° `/favicon.ico` Ñƒ Ğ²ÑÑ– ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½Ğ¸

---

## ğŸ“ Ğ›Ğ¾Ğ³ÑƒĞ²Ğ°Ğ½Ğ½Ñ Ñ‚Ğ° Ğ¿Ğ¾Ğ¼Ğ¸Ğ»ĞºĞ¸

| ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚  | Development  | Production        |
| ---------- | ------------ | ----------------- |
| **Morgan** | Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚ `dev` | Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚ `combined` |

### ĞĞ±Ñ€Ğ¾Ğ±ĞºĞ° Ğ¿Ğ¾Ğ¼Ğ¸Ğ»Ğ¾Ğº

| Ğ¢Ğ¸Ğ¿ Ğ·Ğ°Ğ¿Ğ¸Ñ‚Ñƒ | Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚ Ğ²Ñ–Ğ´Ğ¿Ğ¾Ğ²Ñ–Ğ´Ñ–         |
| ---------- | ------------------------ |
| `/api/*`   | JSON: `{ error: "..." }` |
| HTML       | Ğ¢ĞµĞºÑÑ‚ Ğ¿Ğ¾Ğ¼Ğ¸Ğ»ĞºĞ¸            |

---

## ğŸ—‚ Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾Ñ”ĞºÑ‚Ñƒ

```
ğŸ“¦ project/
â”œâ”€â”€ ğŸ“„ server.js              # Ğ¢Ğ¾Ñ‡ĞºĞ° Ğ²Ñ…Ğ¾Ğ´Ñƒ Express
â”œâ”€â”€ ğŸ“„ package.json
â”‚
â”œâ”€â”€ ğŸ“ public/                # Ğ¡Ñ‚Ğ°Ñ‚Ğ¸Ñ‡Ğ½Ñ– Ñ„Ğ°Ğ¹Ğ»Ğ¸
â”‚   â”œâ”€â”€ ğŸ–¼ favicon.ico
â”‚   â””â”€â”€ ğŸ¨ styles.css
â”‚
â”œâ”€â”€ ğŸ“ views/                 # Ğ¨Ğ°Ğ±Ğ»Ğ¾Ğ½Ğ¸
â”‚   â”œâ”€â”€ ğŸ“ articles/
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ list.ejs       # Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº ÑÑ‚Ğ°Ñ‚ĞµĞ¹ (EJS)
â”‚   â”‚   â””â”€â”€ ğŸ“„ detail.ejs     # Ğ”ĞµÑ‚Ğ°Ğ»Ñ– ÑÑ‚Ğ°Ñ‚Ñ‚Ñ– (EJS)
â”‚   â””â”€â”€ ğŸ“ users/
â”‚       â”œâ”€â”€ ğŸ“„ list.pug       # Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº ĞºĞ¾Ñ€Ğ¸ÑÑ‚ÑƒĞ²Ğ°Ñ‡Ñ–Ğ² (PUG)
â”‚       â””â”€â”€ ğŸ“„ detail.pug     # Ğ”ĞµÑ‚Ğ°Ğ»Ñ– ĞºĞ¾Ñ€Ğ¸ÑÑ‚ÑƒĞ²Ğ°Ñ‡Ğ° (PUG)
â”‚
â””â”€â”€ ğŸ“ src/
    â”œâ”€â”€ ğŸ“ routes/            # ĞœĞ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ¸
    â”‚   â”œâ”€â”€ homeRoutes.js
    â”‚   â”œâ”€â”€ userRoutes.js
    â”‚   â”œâ”€â”€ articleRoutes.js
    â”‚   â”œâ”€â”€ dbArticleRoutes.js
    â”‚   â”œâ”€â”€ apiUserRoutes.js
    â”‚   â”œâ”€â”€ apiDbArticleRoutes.js
    â”‚   â”œâ”€â”€ preferencesRoutes.js
    â”‚   â””â”€â”€ authRoutes.js
    â”‚
    â”œâ”€â”€ ğŸ“ controllers/       # Ğ‘Ñ–Ğ·Ğ½ĞµÑ-Ğ»Ğ¾Ğ³Ñ–ĞºĞ°
    â”‚   â”œâ”€â”€ homeController.js
    â”‚   â”œâ”€â”€ usersController.js
    â”‚   â”œâ”€â”€ articlesController.js
    â”‚   â””â”€â”€ preferencesController.js
    â”‚
    â”œâ”€â”€ ğŸ“ middlewares/       # Middleware
    â”‚   â”œâ”€â”€ ensureAuthenticated.js
    â”‚   â”œâ”€â”€ validateUserData.js
    â”‚   â””â”€â”€ errorHandler.js
    â”‚
    â”œâ”€â”€ ğŸ“ passport/          # Passport ĞºĞ¾Ğ½Ñ„Ñ–Ğ³ÑƒÑ€Ğ°Ñ†Ñ–Ñ
    â”‚   â””â”€â”€ index.js          # LocalStrategy (email + password)
    â”‚
    â”œâ”€â”€ ğŸ“ db/                # Ğ‘Ğ°Ğ·Ğ° Ğ´Ğ°Ğ½Ğ¸Ñ…
    â”‚   â””â”€â”€ mongoose.js       # ĞŸÑ–Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ½Ñ MongoDB Atlas
    â”‚
    â”œâ”€â”€ ğŸ“ models/            # Mongoose Ğ¼Ğ¾Ğ´ĞµĞ»Ñ–
    â”‚   â””â”€â”€ Article.js
    â”‚
    â”œâ”€â”€ ğŸ“ services/          # Ğ¡ĞµÑ€Ğ²Ñ–ÑĞ¸
    â”‚   â””â”€â”€ mailer.js         # Nodemailer transport
    â”‚
    â””â”€â”€ ğŸ“ data/              # In-memory ÑÑ…Ğ¾Ğ²Ğ¸Ñ‰Ğ°
        â””â”€â”€ usersStore.js     # ĞšĞ¾Ñ€Ğ¸ÑÑ‚ÑƒĞ²Ğ°Ñ‡Ñ– + Ñ…ĞµÑˆÑƒĞ²Ğ°Ğ½Ğ½Ñ
```
